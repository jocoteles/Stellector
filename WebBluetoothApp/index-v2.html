<!DOCTYPE html>

<!-- file paths start without / when running with python http.server  -->
<!-- file paths start with / when running on glitch.com  -->

<html lang="en">

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

	<title>Star Projector</title>

    <link rel="stylesheet" href="style.css"/>
    <script src="libs/three.min.js"></script>  
    <script src="libs/optimization.js"></script>
    <script src="libs/orb.v2.min.js"></script>
    <script src="modules/StarPointer.module.js" type="module" defer></script>
    <script type="text/javascript" src="data/stars.6.js"></script>    
    <script type="text/javascript" src="data/starnames.js"></script>    
    <script src="script-v2.js" type="module" defer></script>
  </head>

  <body>
  
    <div id="appW" style="grid-template-rows:2em 1fr;">
      <div id="appMenuW" style="grid-row:1;grid-template-columns:repeat(5,1fr);">
        <div class="menuBtn" id="navM" onclick="App.setWindow('appNavW')">Nav</div>
        <div class="menuBtn" id="findM" onclick="App.setWindow('appFindW')">Find</div>
        <div class="menuBtn" id="calibM" onclick="App.setWindow('appCalibW')">Calib</div>
        <div class="menuBtn" id="comM" onclick="App.setWindow('appCommW')">Comm</div>
        <div class="menuBtn" id="helpM" onclick="App.setWindow('appHelpW')">Help</div>
      </div>

      <button class="transitionButton" id="appControllerBtn" onclick="App.changeNav('appController')">Controller</button>      
      <div id="appController" style="grid-template-rows:auto;grid-template-columns:repeat(3,1fr);">        
      <div id="controllerSVGcontainer" style="grid-column:1/4;">
        <svg width="60%" height="100%" viewBox="0 0 130 130" >
          <g id="d12" onclick="Controller.sendStepSize(this.id)">
            <path
              style="fill:#008000;stroke:none;stroke-width:1.05000004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:0.6917454"
              d="M 0.5625,0.5625 H 119.47503 L 60.01876,60.01877 0.5625,0.5625"/>
            <text
              xml:space="preserve"
              style="font-style:normal;font-weight:normal;font-size:30px;line-height:1.25;font-family:sans-serif;fill:#006500;fill-opacity:1;stroke:none;stroke-width:0.75;"
              x="40.495289"
              y="31.53867"><tspan
                sodipodi:role="line"
                x="40.495289"
                y="31.53867"
                style="font-size:24px;fill:#006500;fill-opacity:1;stroke-width:0.75;stroke:none;">MR</tspan></text>
          </g>
          <g id="d10" onclick="Controller.sendStepSize(this.id)">
            <path
              style="fill:#008000;stroke:none;stroke-width:1.125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:0.6917454"
              d="M 0.56251,119.47503 H 119.47504 L 60.01877,60.01876 0.56251,119.47503"/>
            <text
              xml:space="preserve"
              style="font-style:normal;font-weight:normal;font-size:30px;line-height:1.25;font-family:sans-serif;fill:#006500;fill-opacity:1;stroke:none;stroke-width:0.75;"
              x="41.86639"
              y="105.99496"><tspan
                sodipodi:role="line"
                x="41.86639"
                y="105.99496"
                style="font-size:24px;fill:#006500;fill-opacity:1;stroke-width:0.75;stroke:none;">ML</tspan></text>
          </g>
          <g id="d21" onclick="Controller.sendStepSize(this.id)">
            <path
              style="fill:#800000;stroke:none;stroke-width:1.125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:0.63087082"
              d="M 119.47503,119.47503 V 0.5625 l -59.456269,59.45627 59.456269,59.45626"/>
            <text
              xml:space="preserve"
              style="font-style:normal;font-weight:normal;font-size:30px;line-height:1.25;font-family:sans-serif;fill:#800000;fill-opacity:1;stroke:none;stroke-width:0.75;"
              x="81.174644"
              y="68.766853"><tspan
                sodipodi:role="line"
                x="81.174644"
                y="68.766853"
                style="font-size:24px;fill:#800000;fill-opacity:1;stroke-width:0.75;stroke:none;">FR</tspan></text>
          </g>
          <g id="d01" onclick="Controller.sendStepSize(this.id)">
            <path
              style="fill:#800000;stroke:none;stroke-width:1.125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:0.63087082"
              d="M 0.5625,0.5625 V 119.47503 L 60.01877,60.01876 0.5625,0.5625"/>
            <text
              xml:space="preserve"
              style="font-style:normal;font-weight:normal;font-size:30px;line-height:1.25;font-family:sans-serif;fill:#800000;fill-opacity:1;stroke:none;stroke-width:0.75;"
              x="8.0894518"
              y="68.766769"><tspan
                sodipodi:role="line"
                x="8.0894518"
                y="68.766769"
                style="font-size:24px;fill:#800000;fill-opacity:1;stroke-width:0.75;stroke:none;">FL</tspan></text>
          </g>
        </svg>
      </div>
      <div style="grid-column:1/3;">
        <div>Step size: <span id="stepSizeT"></span></div>
        <input id="stepSizeR" type="range" onchange="Controller.updateStepSize()" list="steplist">
        <datalist id="steplist">
          <option>0</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>                
        </datalist>              
      </div>
      <div style="grid-column:3;" class="direcBtn" id="laserStateB" onclick="Controller.switchLaser()"></div>            
      </div>
      
      <div class="window" id="appCalibW" style="grid-template-rows:auto;grid-template-columns:1fr;">        
                
        <div id="appCalibStarsW" style="grid-template-rows:1fr;grid-template-columns:repeat(2, 1fr);">                                      
          <div style="grid-column:1/3;"><button onclick="CalibW.updateCalib('add')">ADD CALIB OBJECT</button></div>
          <div>
            <div>Select object:</div>
            <div><select id="calibStarsCombo" style="width:80%;"></select></div>                        
          </div>

          <div style="display:grid;grid-template-columns:1fr 3fr;grid-template-rows:auto;">
            <div style="grid-column:1/3">Object filter</div>
            <div>Name:</div>
            <div><input id="nameCfilter" type="text" size="9"></div>
            <div>Cons:</div>
            <div><input id="consCfilter" type="text" size="9"></div>
            <div>HIP:</div>
            <div><input id="hipCfilter" type="text" size="9"></div>
            <div>HD:</div>
            <div><input id="hdCfilter" type="text" size="9"></div>
          </div>
        </div>
        
        <button class="transitionButton" id="appCalibListBtn" onclick="App.changeNav('appCalibListW')">Calibration List</button>
        <div id="appCalibListW" style="grid-template-rows:auto;grid-template-columns:repeat(2, 1fr);">
          <div><select id="calibListCombo" style="width:80%;"></select></div>
          <div>
            <button onclick="CalibW.updateCalib('remThis')">remove this</button>
            <button onclick="CalibW.updateCalib('remAll')">remove all</button>
          </div>
          <div style="grid-column:1/3">
            <br>
            <button onclick="CalibW.calcCalib()">CALC</button>
            <button onclick="CalibW.acceptCalib()">ACCEPT</button>
          </div>          
        </div>
        
        <button class="transitionButton" id="appCalibInfoBtn" onclick="App.changeNav('appCalibInfoW')">Actual Calibration Info</button>
        <div id="appCalibInfoW">          
          <textarea id="calibInfo" style="width:90%" rows="10" readonly></textarea>  
        </div>
        
        <button class="transitionButton" id="appCalibLogBtn" onclick="App.changeNav('appCalibLogW')">Calibration Log</button>
        <div id="appCalibLogW">          
          <textarea id="calibLog" style="width:90%" rows="10" readonly></textarea>  
        </div>

      </div>

      <div class="window" id="appNavW" style="grid-template-rows:auto;grid-template-columns:1fr;">        

        <button class="transitionButton" id="appNavStarsBtn" onclick="App.changeNav('appNavStarsW')">Stars and Solar System</button>
        <div id="appNavStarsW" style="grid-template-rows: 1fr;grid-template-columns: repeat(2, 1fr);">                                      
          <div>
            <div>Select object:</div>
            <div><select id="navStarsCombo" style="width:80%;"></select></div>            
            <div><button onclick="NavW.loadCoords()">load Coords</button></div>
          </div>

          <div style="display:grid;
                      grid-template-columns:1fr 3fr;
                      grid-template-rows:auto;">
            <div style="grid-column:1/3">Object filter</div>
            <div>Name:</div>
            <div><input id="nameNfilter" type="text" size="9"></div>
            <div>Cons:</div>
            <div><input id="consNfilter" type="text" size="9"></div>
            <div>HIP:</div>
            <div><input id="hipNfilter" type="text" size="9"></div>
            <div>HD:</div>
            <div><input id="hdNfilter" type="text" size="9"></div>
          </div>
          
          <div style="grid-column:1/3;">
            <span>Pointer style: </span>
            <select id="ssPointerStyle"></select>
          </div>
        </div>        

        <button class="transitionButton" id="appNavCoordBtn" onclick="App.changeNav('appNavCoordW')">Coordinates</button>      
        <div id="appNavCoordW" style="grid-template-rows:repeat(3, 1fr);grid-template-columns:2fr 3fr 1fr 4fr;">
          <div style="grid-row:1; grid-column:1;" id="phiLabel"> Phi: </div>
          <div style="grid-row:1; grid-column:2;">            
            <input id="phiI" onkeyup="NavW.updateCoordSys('insert')" onkeydown="this.setSelectionRange(-1, -1);" type="text" size="8">
          </div>
          <div style="grid-row:1; grid-column:3;" id="phiUnit"></div>

          <div style="grid-row:1/3; grid-column:4;">
            <input type="radio" name="coordSysN" value="steps" onchange="NavW.updateCoordSys('check')">
            <span> steps </span><br>
            <input type="radio" name="coordSysN" value="eqFloat" onchange="NavW.updateCoordSys('check')">
            <span> equatorial dec </span><br>
            <input type="radio" name="coordSysN" value="eqArc" onchange="NavW.updateCoordSys('check')">
            <span> equatorial arc </span>
          </div>
          
          <div style="grid-row:2; grid-column:1" id="thetaLabel"> Theta: </div>
          <div style="grid-row:2; grid-column:2">
            <input id="thetaS" onclick="NavW.changeCoordSign()" type="button" value="+">
            <input id="thetaI" onkeyup="NavW.updateCoordSys('insert')" onkeydown="this.setSelectionRange(-1, -1);" type="text" size="6">
          </div>
          <div style="grid-row:2; grid-column:3" id="thetaUnit"></div>

          <div style="grid-row:3; grid-column:1/5;
                      display:grid;
                      grid-template-columns:1fr 1fr 1fr;">
            <div><button onclick="NavW.goToActStep()">go Coords</button></div>
            <div><button onclick="NavW.readActStep()">read Coords</button></div>
            <div><button onclick="NavW.setZenith()">go Zenith</button></div>
          </div>
        </div>        

      </div>

      <div class="window" id="appCommW">

        <button onclick="CommW.startComm()">
          Start comm
        </button>        
		    <br>		
        <textarea id="commStatus" rows="10" readonly></textarea>        
      </div>

      <div class="window" id="appTourW">
        <button onclick="TourW.goCircle()">go Circle</button>
      </div>
      
    </div>
    
  </body>
</html>
