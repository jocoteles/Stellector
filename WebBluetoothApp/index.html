<!DOCTYPE html>

<!-- file paths start without / when running with python http.server  -->
<!-- file paths start with / when running on glitch.com  -->

<html lang="en">

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

	<title>Star Projector</title>

    <link rel="stylesheet" href="style.css"/>
    <script src="libs/three.min.js"></script>  
    <script src="libs/optimization.js"></script>
    <script src="libs/orb.v2.min.js"></script>
    <script src="modules/StarPointer.module.js" type="module" defer></script>
    <script type="text/javascript" src="data/stars.6.js"></script>    
    <script type="text/javascript" src="data/starnames.js"></script>    
    <script type="text/javascript" src="data/dso.6.js"></script>    
    <script type="text/javascript" src="data/dsonames.js"></script>    
    <script type="text/javascript" src="data/messier.js"></script>
    <script type="text/javascript" src="data/constellations.js"></script>
    <script src="script.js" type="module" defer></script>
  </head>

  <body>
  
    <div id="appW" style="grid-template-rows:2em 1fr;">
      <div id="appMenuW" style="grid-row:1;grid-template-columns:repeat(5,1fr);">
        <div class="menuBtn" id="navM" onclick="App.setWindow('appNavW')">Nav</div>
        <div class="menuBtn" id="findM" onclick="App.setWindow('appFindW')">Find</div>
        <div class="menuBtn" id="calibM" onclick="App.setWindow('appCalibW')">Calib</div>
        <div class="menuBtn" id="comM" onclick="App.setWindow('appCommW')">Comm</div>
        <div class="menuBtn" id="helpM" onclick="App.setWindow('appHelpW')">Help</div>
      </div>

      <button class="transitionButton" id="appControllerBtn" onclick="App.changeNav('appController')">Controller</button>      
      <div id="appController" style="grid-template-rows:auto;grid-template-columns:repeat(3,1fr);">        
      <div id="controllerSVGcontainer" style="grid-column:1/4;">
        <svg width="60%" height="100%" viewBox="0 0 130 130" >
          <g id="d12" onclick="Controller.sendStepSize(this.id)">
            <path
              style="fill:#008000;stroke:none;stroke-width:1.05000004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:0.6917454"
              d="M 0.5625,0.5625 H 119.47503 L 60.01876,60.01877 0.5625,0.5625"/>
            <text
              xml:space="preserve"
              style="font-style:normal;font-weight:normal;font-size:30px;line-height:1.25;font-family:sans-serif;fill:#006500;fill-opacity:1;stroke:none;stroke-width:0.75;"
              x="40.495289"
              y="31.53867"><tspan
                sodipodi:role="line"
                x="40.495289"
                y="31.53867"
                style="font-size:24px;fill:#006500;fill-opacity:1;stroke-width:0.75;stroke:none;">MR</tspan></text>
          </g>
          <g id="d10" onclick="Controller.sendStepSize(this.id)">
            <path
              style="fill:#008000;stroke:none;stroke-width:1.125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:0.6917454"
              d="M 0.56251,119.47503 H 119.47504 L 60.01877,60.01876 0.56251,119.47503"/>
            <text
              xml:space="preserve"
              style="font-style:normal;font-weight:normal;font-size:30px;line-height:1.25;font-family:sans-serif;fill:#006500;fill-opacity:1;stroke:none;stroke-width:0.75;"
              x="41.86639"
              y="105.99496"><tspan
                sodipodi:role="line"
                x="41.86639"
                y="105.99496"
                style="font-size:24px;fill:#006500;fill-opacity:1;stroke-width:0.75;stroke:none;">ML</tspan></text>
          </g>
          <g id="d21" onclick="Controller.sendStepSize(this.id)">
            <path
              style="fill:#800000;stroke:none;stroke-width:1.125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:0.63087082"
              d="M 119.47503,119.47503 V 0.5625 l -59.456269,59.45627 59.456269,59.45626"/>
            <text
              xml:space="preserve"
              style="font-style:normal;font-weight:normal;font-size:30px;line-height:1.25;font-family:sans-serif;fill:#800000;fill-opacity:1;stroke:none;stroke-width:0.75;"
              x="81.174644"
              y="68.766853"><tspan
                sodipodi:role="line"
                x="81.174644"
                y="68.766853"
                style="font-size:24px;fill:#800000;fill-opacity:1;stroke-width:0.75;stroke:none;">FR</tspan></text>
          </g>
          <g id="d01" onclick="Controller.sendStepSize(this.id)">
            <path
              style="fill:#800000;stroke:none;stroke-width:1.125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:0.63087082"
              d="M 0.5625,0.5625 V 119.47503 L 60.01877,60.01876 0.5625,0.5625"/>
            <text
              xml:space="preserve"
              style="font-style:normal;font-weight:normal;font-size:30px;line-height:1.25;font-family:sans-serif;fill:#800000;fill-opacity:1;stroke:none;stroke-width:0.75;"
              x="8.0894518"
              y="68.766769"><tspan
                sodipodi:role="line"
                x="8.0894518"
                y="68.766769"
                style="font-size:24px;fill:#800000;fill-opacity:1;stroke-width:0.75;stroke:none;">FL</tspan></text>
          </g>
        </svg>
      </div>
      <div style="grid-column:1/3;">
        <div>Step size: <label id="stepSizeT"></label></div>
        <input id="stepSizeR" type="range" onchange="Controller.updateStepSize()" list="stepSizeRList">
        <datalist id="stepSizeRList"></datalist>
      </div>
      <div style="grid-column:3;" class="direcBtn" id="laserStateB" onclick="Controller.switchLaser()"></div>            
      </div>
      
      <div class="window" id="appCalibW" style="grid-template-rows:auto;grid-template-columns:1fr;">        
                
        <div id="appCalibStarsW" style="grid-template-rows:1fr;grid-template-columns:repeat(2, 1fr);">                                      
          <div style="grid-column:1/3;"><button onclick="CalibW.updateCalib('add')">ADD CALIB OBJECT</button></div>
          <div>
            <div>Object type:</div>
            <div><select id="calibObjectsTypeCombo" style="width:80%;" onchange="App.changeObjectsType(this)"></select></div>                        
            <div>Object selected:</div>
            <div><select id="calibObjectsCombo" style="width:80%;"></select></div>                        
          </div>

          <div style="display:grid;grid-template-columns:1fr 3fr;">
            <div style="grid-column:1/3">Object filter</div>
            <div>Name:</div><div><input id="nameCfilter" type="text" size="9"></div>
            <div>Cons:</div><div><input id="consCfilter" type="text" size="9"></div>
            <div>HIP:</div><div><input id="hipCfilter" type="text" size="9"></div>
            <div>HD:</div><div><input id="hdCfilter" type="text" size="9"></div>
          </div>
        </div>
        
        <button class="transitionButton" id="appCalibListBtn" onclick="App.changeNav('appCalibListW')">Calibration List</button>
        <div id="appCalibListW" style="grid-template-rows:auto;grid-template-columns:repeat(2, 1fr);">
          <div><select id="calibListCombo" style="width:80%;"></select></div>
          <div>
            <button onclick="CalibW.updateCalib('remThis')">remove this</button>
            <button onclick="CalibW.updateCalib('remAll')">remove all</button>
          </div>
          <div style="grid-column:1/3">
            <br>
            <button onclick="CalibW.calcCalib()">CALC</button>
            <button onclick="CalibW.acceptCalib()">ACCEPT</button>
          </div>          
        </div>
        
        <button class="transitionButton" id="appCalibInfoBtn" onclick="App.changeNav('appCalibInfoW')">Actual Calibration Info</button>
        <div id="appCalibInfoW">          
          <textarea id="calibInfo" style="width:90%" rows="10" readonly></textarea>  
        </div>
        
        <button class="transitionButton" id="appCalibLogBtn" onclick="App.changeNav('appCalibLogW')">Calibration Log</button>
        <div id="appCalibLogW">          
          <textarea id="calibLog" style="width:90%" rows="10" readonly></textarea>  
        </div>

      </div>

      <div class="window" id="appNavW" style="grid-template-rows:auto;grid-template-columns:1fr;">        
        
        <button class="transitionButton" id="appNavStarsBtn" onclick="App.changeNav('appNavStarsW')">Sky Objects</button>
        <div id="appNavStarsW" style="grid-template-rows: 1fr;grid-template-columns: repeat(2, 1fr);">                                      
          <div>
            <div>Object type:</div>
            <div><select id="navObjectsTypeCombo" style="width:80%;" onchange="App.changeObjectsType(this)"></select></div>                        
            <div>Object selected:</div>
            <div><select id="navObjectsCombo" style="width:80%;"></select></div>            
            <div><button onclick="NavW.showCoords()">show Coords</button></div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 3fr;">
            <div style="grid-column:1/3">Object filter</div>
            <div>Name:</div><div><input id="nameNfilter" type="text" size="9"></div>
            <div>English:</div><div><input id="enNfilter" type="text" size="9"></div>
            <div>Spanish:</div><div><input id="esNfilter" type="text" size="9"></div>
            <div>Cons:</div><div><input id="consNfilter" type="text" size="9"></div>
            <div>HIP:</div><div><input id="hipNfilter" type="text" size="9"></div>
            <div>HD:</div><div><input id="hdNfilter" type="text" size="9"></div>            
            <div>Desig:</div><div><input id="desigNfilter" type="text" size="9"></div>
            <div>M:</div><div><input id="mNfilter" type="text" size="9"></div>
            <div>NGC:</div><div><input id="ngcNfilter" type="text" size="9"></div>
          </div>
          
          <div style="grid-column:1/3;">
            <label>Pointer style: </label>
            <select id="objectPointerStyle"></select>
          </div>

          <div style="grid-column:1/3;">
            <label>Time step: </label>
            <input type="number" id="timeStepY" value="0" min="0" max="10" step="1" style="width:10%;" oninput="NavW.timeStepCheck(this)">years
            <input type="number" id="timeStepD" value="0" min="0" max="365" step="1" style="width:10%;" oninput="NavW.timeStepCheck(this)">days
            <input type="number" id="timeStepM" value="0" min="0" max="1440" step="1" style="width:10%;" oninput="NavW.timeStepCheck(this)">minutes
          </div>          
          <div style="grid-column:1/3;">
            <label>Date:</label><input type="date" id="navDate">
            <label>Time:</label><input type="time" id="navTime">
          </div>
          <span style="grid-column:1;">
            <div>
              <button onclick="NavW.goStar('-1')">go Back</button>              
              <button onclick="NavW.goStar('+1')">go Forward</button>              
            </div>
            <input type="checkbox" id="sideralOffset">sideral offset
          </span>
          <div style="grid-column:2;">
            <div><button onclick="NavW.goStar('now')">go Now</button></div>
            <div><button onclick="NavW.goStar('date')">go DateTime</button></div>
          </div>
          
        </div>        

        <button class="transitionButton" id="appNavSTracksBtn" onclick="App.changeNav('appNavSTracksW')">Sky Tracks</button>
        <div id="appNavSTracksW" style="grid-template-rows: 1fr;grid-template-columns: repeat(2, 1fr);">
          <div>
            <div>Track type:</div>
            <div><select id="navTracksTypeCombo" style="width:80%;" onchange="App.changeObjectsType(this)"></select></div>                        
            <div>Track selected:</div>
            <div><select id="navTracksCombo" style="width:80%;"></select></div>                        
          </div>

          <div style="display:grid;grid-template-columns:1fr 3fr;">
            <div style="grid-column:1/3">Object filter</div>
            <div>Name:</div><div><input id="nameNfilter" type="text" size="9"></div>
            <div>Es:</div><div><input id="esNfilter" type="text" size="9"></div>
            <div>Cons:</div><div><input id="consNfilter" type="text" size="9"></div>
            <div>HIP:</div><div><input id="hipNfilter" type="text" size="9"></div>
            <div>HD:</div><div><input id="hdNfilter" type="text" size="9"></div>            
            <div>ID:</div><div><input id="idNfilter" type="text" size="9"></div>
            <div>M:</div><div><input id="mNfilter" type="text" size="9"></div>
            <div>NGC:</div><div><input id="ngcNfilter" type="text" size="9"></div>
          </div>

          <div style="grid-column:1/3;">
            <label>Track style: </label>
            <select id="trackStyle"></select>
          </div>
          <div style="grid-column:1/3;">
            <span>Track speed: </span>
            <input id="trackSpeedR" type="range" onchange="Controller.updateTrackSpeed()" list="trackSpeedRList">            
            <datalist id="trackSpeedRList"></datalist>            
            <label id="trackSpeedT"></label>
          </div>
        </div>

        <button class="transitionButton" id="appNavCoordBtn" onclick="App.changeNav('appNavCoordW')">Coordinates</button>      
        <div id="appNavCoordW" style="grid-template-columns:2fr 5fr 3fr;">
          
          <div style="grid-row:1; grid-column:1;">R.A.:</div>
          <div style="grid-row:1; grid-column:2;">
            <input type="number" id="raInputH" min="0" max="23" step="1" style="width:17%;" oninput="NavW.updateCoordSys(this)">h
            <input type="number" id="raInputM" min="0" max="59" step="1" style="width:17%;" oninput="NavW.updateCoordSys(this)">m
            <input type="number" id="raInputS" min="0" max="59" step="1" style="width:17%;" oninput="NavW.updateCoordSys(this)">s
          </div>
          <div style="grid-row:1; grid-column:3;">
            <input type="number" id="raInputF" min="0" max="23.9997" style="width:70%;" oninput="NavW.updateCoordSys(this)">h 
          </div>
          <div style="grid-row:2; grid-column:1;">Dec.:</div>
          <div style="grid-row:2; grid-column:2;">
            <input type="number" id="decInputD" min="-89" max="89" step="1" style="width:17%;" oninput="NavW.updateCoordSys(this)">°
            <input type="number" id="decInputM" min="0" max="59" step="1" style="width:17%;" oninput="NavW.updateCoordSys(this)">'
            <input type="number" id="decInputS" min="0" max="59" step="1" style="width:17%;" oninput="NavW.updateCoordSys(this)">"
          </div>
          <div style="grid-row:2; grid-column:3;">
            <input type="number" id="decInputF" min="-89.9997" max="89.9997" style="width:70%;" oninput="NavW.updateCoordSys(this)">° 
          </div>          
          <button style="grid-row:3; grid-column:1;" onclick="NavW.goEquatorial()">go Equatorial</button>
          <button style="grid-row:3; grid-column:2;" onclick="NavW.readCoords()">read Coords</button>
          <button style="grid-row:3; grid-column:3;" onclick="NavW.goZenith()">go Zenith</button>          
          <div style="grid-row:4; grid-column:1;">Fix:</div>
          <div style="grid-row:4; grid-column:2;">
            <input type="number" id="fixInput" min="0" max="1023" step="1" style="width:25%;" oninput="NavW.updateCoordSys(this)">steps
          </div>
          <div style="grid-row:5; grid-column:1;">Mob:</div>
          <div style="grid-row:5; grid-column:2;">
            <input type="number" id="mobInput" min="0" max="1023" step="1" style="width:25%;" oninput="NavW.updateCoordSys(this)">steps
          </div>
          <button style="grid-row:4/6; grid-column:3;" onclick="NavW.goSteps()">go Steps</button>
          <div style="grid-column:1/4;">
            <label>Pointer style: </label>
            <select id="coordsPointerStyle"></select>
          </div>                    
        </div>        

      </div>

      <div class="window" id="appCommW">

        <button onclick="CommW.startComm()">
          Start comm
        </button>        
		    <br>		
        <textarea id="commStatus" rows="10" readonly></textarea>        
      </div>

      <div class="window" id="appTourW">
        <button onclick="TourW.goCircle()">go Circle</button>
      </div>
      
    </div>
    
  </body>
</html>
